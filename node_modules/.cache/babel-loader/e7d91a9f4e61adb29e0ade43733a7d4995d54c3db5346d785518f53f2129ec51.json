{"ast":null,"code":"import _slicedToArray from\"C:/Users/Toshiba/OneDrive/Documents/WEB DEVELOPMENT/BlooduApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Card,CardActions,CardContent,CardMedia,Button,Typography}from'@mui/material';import useStyles from'./postStyles';import DeleteIcon from'@mui/icons-material/Delete';import MoreHorizIcon from'@mui/icons-material/MoreHoriz';import axios from'axios';import{useHistory}from'react-router-dom/cjs/react-router-dom.min';import UserHome from'../../UserHome/UserHome.tsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(_ref){var post=_ref.post;var classes=useStyles();var navigate=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),cnic=_useState2[0],setCnic=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),postcnic=_useState4[0],setPostCnic=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),key=_useState6[0],setKey=_useState6[1];useEffect(function(){axios.get('http://localhost:3005/api/Person/personinfo',{headers:{accessToken2:sessionStorage.getItem(\"accessToken2\")}}).then(function(response){if(response.data.error){console.log(response.data.error);}else{setPostCnic(Number(post===null||post===void 0?void 0:post.cnic));setCnic(response.data[0].cnic);}});},[]);return/*#__PURE__*/_jsxs(Card,{className:classes.card,raised:true,elevation:6,children:[/*#__PURE__*/_jsx(CardMedia,{className:classes.media,image:post===null||post===void 0?void 0:post.profile}),/*#__PURE__*/_jsxs(\"div\",{className:classes.overlay,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"ID: \",post===null||post===void 0?void 0:post.req_id]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[\"Posted: \",post===null||post===void 0?void 0:post.Time]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:'20px'},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"Group: \",post===null||post===void 0?void 0:post.bloodGroup]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"Bottles Needed: \",post===null||post===void 0?void 0:post.Qtyneed]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"Time Period: \",post===null||post===void 0?void 0:post.TimePeriod,\" days\"]})]}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"Message: \",post===null||post===void 0?void 0:post.Reason]})}),/*#__PURE__*/_jsx(CardActions,{className:classes.cardActions,children:cnic===postcnic&&/*#__PURE__*/_jsxs(Button,{size:\"small\",color:\"primary\",onClick:function onClick(){axios.delete(\"http://localhost:3005/api/Request/delete/\".concat(post===null||post===void 0?void 0:post.req_id),{headers:{accessToken2:sessionStorage.getItem(\"accessToken2\")}}).then(function(response){if(response.data.error){console.log(response.data.error);}else{console.log(\"deleted successfully\");}});},children:[/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"medium\"}),\"Delete\"]})})]});};export default Post;","map":{"version":3,"names":["React","useEffect","useState","Card","CardActions","CardContent","CardMedia","Button","Typography","useStyles","DeleteIcon","MoreHorizIcon","axios","useHistory","UserHome","Post","post","classes","navigate","cnic","setCnic","postcnic","setPostCnic","key","setKey","get","headers","accessToken2","sessionStorage","getItem","then","response","data","error","console","log","Number","card","media","profile","overlay","req_id","Time","marginLeft","bloodGroup","Qtyneed","TimePeriod","Reason","cardActions","delete"],"sources":["C:/Users/Toshiba/OneDrive/Documents/WEB DEVELOPMENT/BlooduApp/client/src/components/Post/PostDetail/Post.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { Card, CardActions, CardContent, CardMedia, Button, Typography} from '@mui/material'\r\nimport useStyles from './postStyles';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz'\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\r\nimport UserHome from '../../UserHome/UserHome.tsx';\r\nconst Post = ({post}) => {\r\n    const classes = useStyles();\r\n    const navigate = useHistory();\r\n    const [cnic, setCnic] = useState(\"\");\r\n    const [postcnic, setPostCnic] = useState(\"\");\r\n    const [key, setKey] = useState(0);\r\n    useEffect(()=>{\r\n      axios.get('http://localhost:3005/api/Person/personinfo', {\r\n        headers:{\r\n            accessToken2 : sessionStorage.getItem(\"accessToken2\"),\r\n        }\r\n    }).then((response)=>{\r\n        if(response.data.error){\r\n          console.log(response.data.error);\r\n            \r\n        }else{\r\n      \r\n          setPostCnic(Number(post?.cnic));\r\n           setCnic(response.data[0].cnic)\r\n          \r\n        }\r\n      })\r\n    }, [])\r\n   \r\n\r\n    \r\n    return (\r\n        <Card className={classes.card} raised elevation={6}>\r\n            <CardMedia className={classes.media} image={post?.profile}/>\r\n            <div className={classes.overlay}>\r\n          <Typography variant='h6'>ID: {post?.req_id}</Typography>\r\n          <Typography variant='body2'>Posted: {post?.Time}</Typography> \r\n          \r\n        </div>\r\n        <div style={{marginLeft:'20px'}}>\r\n        <Typography  variant='h6' gutterBottom>Group: {post?.bloodGroup}</Typography>\r\n        <Typography  variant='h6' gutterBottom>Bottles Needed: {post?.Qtyneed}</Typography>\r\n        <Typography  variant='h6' gutterBottom>Time Period: {post?.TimePeriod} days</Typography>\r\n        </div>\r\n        <CardContent>\r\n          <Typography variant='body2' color=\"textSecondary\" >Message: {post?.Reason}</Typography>\r\n          \r\n        \r\n        </CardContent>\r\n        <CardActions className={classes.cardActions}>\r\n           {(cnic === postcnic) &&(\r\n           \r\n            <Button size='small' color='primary' onClick={()=>{\r\n              \r\n              axios.delete(`http://localhost:3005/api/Request/delete/${post?.req_id}`, {\r\n                headers:{\r\n                    accessToken2: sessionStorage.getItem(\"accessToken2\"),\r\n                }\r\n            }).then((response)=>{\r\n                if(response.data.error){\r\n                  console.log(response.data.error);\r\n                }else{\r\n                    console.log(\"deleted successfully\");\r\n                   \r\n                    \r\n                    \r\n                }\r\n              })\r\n            }}>\r\n              <DeleteIcon fontSize='medium'/>\r\n               Delete\r\n            </Button>\r\n\r\n            )}\r\n           \r\n        </CardActions>\r\n            \r\n        </Card>\r\n    )\r\n\r\n}\r\n\r\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}